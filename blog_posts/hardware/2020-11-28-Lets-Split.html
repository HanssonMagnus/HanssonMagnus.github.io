---
layout: default
title: Let's Split Keyboard
---

<p> Keyboard: Let's Split </p>
<p> Switches: Gazzew Bobba U4 68g (w/ Super Lube PTFE and films) </p>
<p> Keycaps: ePBT Blanks </p>

<h2>Images</h2>
<img src="../../images/ls_1.jpg" alt="Let's Split Photo 1" style="width:384px;" align="middle">
<img src="../../images/ls_2.jpg" alt="Let's Split Photo 2" style="width:384px;" align="middle">

<h2>Parts</h2>
 <ul>
    <li>PCB by /u/wootpatoot.</li>
    <li>48 diods.</li>
    <li>2 TRRS jacks.</li>
    <li>48 switches.</li>
    <li>2 microcontrollers.</li>
    <li>A case.</li>
 </ul>

<h2>Building the Let's Split</h2>
<p>
There is a very good
<a href="https://github.com/nicinabox/lets-split-guide"> guide </a>
to building the
keyboard, which is recommended to follow. It covers everything in detail except flashing the micro
controllers.
The first thing to do is to solder on diodes, TRRS jacks, headers, and connect jumpers.
</p>

<img src="../../images/ls_3.jpg" alt="Let's Split Photo 3" style="width:384px;" align="middle">

<p>
Next it is recommended to test the controllers by plugging them in and checking with a multimeter.
E.g., the Pro Micro should have around 5V between VCC and RAW. Now is also a good time to flash the
firmware onto the controllers.
After this is done what is left is to assemble everything.
</p>

<h2>Flashing the micro controllers</h2>
<p>
When building the keyboard I chose to use one Pro micro and one Elite-C micro controller. This is a
common choice, since the Elite-C is an upgrade, but unnecessary to have on both halves. One thing
to keep in mind is that the two controllers have different bootloaders, and this has to be taken
into account when flashing.
</p>

<p>
When flashing, QMK only builds files with name keymap.c. In the make command the 'keymap' is the
name of the folder containing the keymap.c file. This means that when you write,
</p>

<pre>
<code>make KEYBOARD:YOUR_KEYMAP_NAME:BOOTLOADER</code>
</pre>

<p>
this should be done from the top level qmk_firmware directory. See example below for each
controller.
</p>

<p>
There are a few things to keep in mind when flashing the halves,
</p>

<ul>
    <li> Reset the micro controllers right after you entered the flash command in the CLI.
    <li> Flash the same keymap.c file to both sides.
    <li> To operate on a device you need permission. Thus sudo or udev rules are necessary.
    <li> On some Linux systems people have had problems flashing when Modem Manager is active.
</ul>

<p>
Before you flash the controllers, copy the default firmware to the new build with,
</p>

<pre><code>qmk new-keymab -kb lets_split</code></pre>

<p>
Now you have a keymap.c file in ~/qmk_firmware/keyboards/lets_split/keymap/HanssonMagnus and a
config.h file. You can edit these files as you please.
</p>

<p>
Stop the modem manager if this is an issue for you,
</p>

<pre><code>systemctl stop ModemManager.service</code></pre>

<p>
Compile the keymap,
</p>

<pre><code>sudo make lets_split/rev2:HanssonMagnus</code></pre>

<p>
Flash the Pro Micro with avrdude,
</p>

<pre><code>sudo make lets_split/rev2:HanssonMagnus:avrdude</code></pre>

<p>
The CLI will tell you to reset the controller, this is done by shorting the controller with a
pair of tweezers (or similar), you short the RST and GND. When the flash is done you will get the
following message,
</p>

<pre><code>avrdude: safemode: Fuses OK (E:FD, H:D8, L:FF)

avrdude done.  Thank you.
</pre></code>

<p>
The Elite-C flashing process is similar to the Pro Micro, reset the controller with the reset
button on the controller.
</p>

<pre><code>sudo make lets_split/rev2:HanssonMagnus:dfu</code></pre>

<p>
The Elite-C with dfu will not give you a message when it is done, it will just say,
</p>

<pre><code>Bootloader Version: 0x00 (0)
Validating...
18294 bytes used (63.80%)
</code></pre>

